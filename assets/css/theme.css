/* FarmVista Polish Pack v1 — visual cleanup without breaking structure
   - Typography & spacing polish
   - Card look for content blocks
   - Mobile-friendly widths
   - Horizontal breadcrumbs (bottom of header)
   - Scrollable side drawer (robust)
   - Utility classes
*/

:root{
  --fv-font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  --fv-text: #1b1f23;
  --fv-muted: #6a7280;
  --fv-text-muted: var(--fv-muted);
  --fv-bg: #f7f9fb;
  --fv-surface: #ffffff;
  --fv-panel: var(--fv-surface);
  --fv-border: #e7e9ef;
  --fv-green: #0d7a3e;       /* FarmVista green */
  --fv-brand: var(--fv-green);
  --fv-brand-2: #d2a900;     /* FarmVista gold */
  --fv-gold:  var(--fv-brand-2);
  --fv-green-05: rgba(13,122,62,0.05);
  --fv-focus: #2ea66a;
  --fv-hover: rgba(13,122,62,0.08);
  --fv-shadow: 0 1px 2px rgba(0,0,0,0.06), 0 4px 14px rgba(0,0,0,0.06);
  --fv-radius: 12px;
  --fv-gap-xs: 6px;
  --fv-gap-sm: 10px;
  --fv-gap-md: 16px;
  --fv-gap-lg: 24px;
  --fv-gap-xl: 36px;
  --fv-header-h: 64px; /* adjust if your header is taller */
  --fv-footer-h: 44px; /* adjust if you have a sticky footer */
  --fv-sidebar-w: 296px;
}

/* Base */
html { box-sizing: border-box; }
*,*::before,*::after { box-sizing: inherit; }
html, body { height: 100%; }
body{
  margin:0;
  font-family: var(--fv-font);
  color: var(--fv-text);
  background: var(--fv-bg);
  line-height: 1.4;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  display:flex;
  min-height:100vh;
}

.fv-shell{
  display:flex;
  flex:1 1 auto;
  width:100%;
  min-height:100vh;
}

#app{
  flex:1 1 auto;
  width:100%;
  display:flex;
}

.fv-sidebar{
  position:sticky;
  top:0;
  align-self:flex-start;
  width:var(--fv-sidebar-w);
  min-width:var(--fv-sidebar-w);
  max-height:100vh;
  overflow:hidden;
  background:var(--fv-panel);
  border-right:1px solid var(--fv-border);
  box-shadow:var(--fv-shadow);
  z-index:100;
}

.fv-sidebar__scroll,
.fv-sidebar .drawer-scroll{
  height:100vh;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
  padding:14px 14px 24px;
}

.fv-sidebar a{
  color:var(--fv-text);
  text-decoration:none;
}
.fv-sidebar a:hover{background:var(--fv-hover);}

.fv-main,
.fv-content{
  flex:1 1 auto;
  min-width:0;
  padding:16px;
}

/* App layout helpers (safe, additive) */
#app, .app-root { min-height: 100dvh; }

.container, .page, main{
  max-width: 1240px;
  margin-inline: auto;
  padding: clamp(12px, 2.5vw, 24px);
}

/* Cards */
.card{
  background: var(--fv-surface);
  border: 1px solid var(--fv-border);
  border-radius: var(--fv-radius);
  box-shadow: var(--fv-shadow);
  padding: var(--fv-gap-lg);
}
.card h1, .card h2, .card h3 { margin-top: 0.2em; }

/* Buttons */
.btn{
  display:inline-flex; align-items:center; gap:8px;
  border-radius: 10px; border:1px solid var(--fv-border);
  background: var(--fv-surface);
  padding: 10px 14px; font-weight:600; cursor:pointer;
  transition: transform .06s ease, box-shadow .06s ease, background .2s ease;
}
.btn:focus-visible { outline: 3px solid var(--fv-focus); outline-offset: 2px; }
.btn:hover{ transform: translateY(-1px); box-shadow: var(--fv-shadow); }
.btn.primary{ background: var(--fv-green); color: #fff; border-color: transparent; }
.btn.primary:hover{ filter: brightness(1.04); }

/* Forms (light polish) */
input, select, textarea{
  border:1px solid var(--fv-border);
  border-radius:10px;
  padding:10px 12px;
  background:#fff;
  width:100%;
}
input:focus, select:focus, textarea:focus{
  outline: 3px solid var(--fv-focus);
  border-color: transparent;
}

/* HEADER: keep your existing header; we only add polish */
header, #app-header{
  position: sticky; top: 0; z-index: 1000;
  background: #fff;
  border-bottom:1px solid var(--fv-border);
  min-height: var(--fv-header-h);
}

/* Breadcrumbs: force horizontal row, anchored to header bottom */
.breadcrumbs, .fv-breadcrumbs{
  display: flex; flex-wrap: nowrap; align-items: center;
  gap: 10px;
  height: 36px;
  padding: 0 var(--fv-gap-md);
  border-top: 1px solid var(--fv-border);
  background: #fff;
  overflow-x: auto;
  scrollbar-width: thin;
}
.breadcrumbs a, .fv-breadcrumbs a, .breadcrumbs span{
  white-space: nowrap;
  text-decoration: none;
  color: var(--fv-muted);
  font-weight: 600;
  font-size: 0.95rem;
}
.breadcrumbs .sep::after, .fv-breadcrumbs .sep::after{
  content: "›";
  color: var(--fv-muted);
  margin-inline: 2px;
}

/* If breadcrumbs live inside header container */
#app-header .breadcrumbs, #app-header .fv-breadcrumbs{
  border-top: 1px solid var(--fv-border);
}


/* ------- Sidebar groups ------- */
.fv-group{
  border-bottom:1px solid var(--fv-border);
  padding:8px 0 6px;
}

.fv-group.expanded .fv-group-header,
.fv-group.is-open .fv-group__title{background:transparent;}

.fv-group-header,
.fv-group__title{
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-weight:700;
  font-size:15px;
  line-height:1.2;
  padding:10px 8px;
  border-radius:8px;
  cursor:pointer;
  user-select:none;
  background:transparent;
  border:none;
  width:100%;
  color:inherit;
}

.fv-group-header.active,
.fv-group__title.active{color:var(--fv-brand);}

.fv-group-header:hover,
.fv-group__title:hover{background:var(--fv-hover);}

.fv-group-header .chevron,
.fv-group__chev{
  display:inline-block;
  width:16px;
  height:16px;
  margin-left:8px;
  transition:transform .18s ease;
}

.fv-group.expanded .chevron,
.fv-group.is-open .fv-group__chev{transform:rotate(90deg);}

.fv-sublist,
.fv-links{
  display:grid;
  grid-template-columns:1fr;
  gap:2px;
  margin:6px 0 10px;
  padding:0 4px 8px;
  overflow:hidden;
}

.fv-sublist a,
.fv-link{
  display:block;
  padding:8px 10px;
  border-radius:8px;
  font-size:14px;
  color:var(--fv-text);
}

.fv-sublist a.active,
.fv-link.active{
  background:var(--fv-green-05);
  color:var(--fv-brand);
  font-weight:600;
}

.fv-sublist a:hover,
.fv-link:hover{background:var(--fv-hover);}

.fv-sublist a:active,
.fv-link:active{transform:translateY(1px);}

.fv-home-link{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px;
  border-radius:10px;
  font-weight:600;
}

.fv-home-link:hover{background:var(--fv-hover);}

.fv-home-link span:last-child{opacity:0.6;}

/* Content header rows */
.page-title{
  display:flex; align-items:center; justify-content:space-between;
  gap: 12px; margin: 6px 0 16px;
}
.page-title h1{ font-size: clamp(1.25rem, 2.2vw, 1.6rem); margin: 0; }

/* Tables */
.table{
  width:100%;
  border-collapse: separate; border-spacing:0;
  background:#fff; border:1px solid var(--fv-border);
  border-radius: 12px; overflow: hidden;
}
.table th{
  text-align:left; background: linear-gradient(0deg, #fff, #fff) padding-box,
                    linear-gradient(90deg, var(--fv-green), var(--fv-gold)) border-box;
  border-bottom: 2px solid var(--fv-border);
  padding:12px 14px; color:#0b4023; font-weight:800;
}
.table td{ padding: 12px 14px; border-bottom:1px solid var(--fv-border); }
.table tr:last-child td{ border-bottom: none; }

/* Utility chips */
.badge{ display:inline-block; padding:4px 10px; border-radius:999px; font-weight:700; font-size:.85rem; }
.badge.green{ background: var(--fv-green-05); color: var(--fv-green); }
.badge.gold{ background: rgba(212,160,23,0.08); color: var(--fv-gold); }

/* Footer */
footer, #app-footer{
  background:#fff; border-top:1px solid var(--fv-border);
  min-height: var(--fv-footer-h);
}

/* Tweak wide layouts on mobile */
@media (max-width: 980px){
  .container, .page, main{ padding: 14px; }
  nav#side-drawer{ width: 260px; }
  .page-title{ flex-direction: column; align-items: flex-start; gap: 6px; }
}

@media (max-width:900px){
  :root{ --fv-sidebar-w:260px; }
  .fv-main,
  .fv-content{ padding:12px; }
}

/* OPTIONAL: Hide any built-in header search/profile block; JS will inject a gear */
#app-header .header-search, #app-header .profile-box, .header-search, .profile-box{
  display: none !important;
}

/* Settings gear button look (inserted by JS) */
.fv-gear-btn{
  all: unset;
  display:inline-flex; align-items:center; justify-content:center;
  width: 38px; height: 38px; border-radius: 10px;
  border:1px solid var(--fv-border);
  background:#fff; cursor:pointer; font-size: 20px; line-height: 1;
}
.fv-gear-btn:hover{ box-shadow: var(--fv-shadow); transform: translateY(-1px); }

/* Sidebar base styling */
.sidebar {
  position: fixed;
  left: 0;
  top: 0;
  width: 260px;
  height: 100%;
  background-color: #ffffff;
  box-shadow: 2px 0 8px rgba(0,0,0,0.1);
  overflow-y: auto;
  transition: transform 0.3s ease-in-out;
  z-index: 2000;
}

/* Sidebar hidden state for mobile */
.sidebar.closed {
  transform: translateX(-100%);
}

/* Sidebar overlay (dim background when sidebar open) */
.sidebar-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.4);
  z-index: 1000;
}

.sidebar-overlay.active {
  display: block;
}

/* Prevent horizontal scrolling globally */
body {
  overflow-x: hidden;
}

/* Adjust main content when sidebar is visible */
.main-content {
  transition: margin-left 0.3s ease-in-out;
}

/* For desktop, sidebar always visible */
@media (min-width: 768px) {
  .sidebar {
    transform: none !important;
  }
  .sidebar-overlay {
    display: none !important;
  }
  .main-content {
    margin-left: 260px;
  }
}

/* For mobile, sidebar slides over content */
@media (max-width: 767px) {
  .main-content {
    margin-left: 0 !important;
  }
}
