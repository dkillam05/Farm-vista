/* FarmVista Polish Pack v1 — visual cleanup without breaking structure
   - Typography & spacing polish
   - Card look for content blocks
   - Mobile-friendly widths
   - Horizontal breadcrumbs (bottom of header)
   - Scrollable side drawer (robust)
   - Utility classes
*/

:root{
  --fv-font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  --fv-text: #1e2a1f;
  --fv-muted: #6b7280;
  --fv-bg: #f7faf7;
  --fv-surface: #ffffff;
  --fv-border: rgba(0,0,0,0.08);
  --fv-green: #0c7c3e;       /* Farm green */
  --fv-gold:  #d4a017;       /* Farm gold */
  --fv-green-05: rgba(12,124,62,0.05);
  --fv-focus: #2ea66a;
  --fv-shadow: 0 1px 2px rgba(0,0,0,0.05), 0 8px 24px rgba(0,0,0,0.08);
  --fv-radius: 12px;
  --fv-gap-xs: 6px;
  --fv-gap-sm: 10px;
  --fv-gap-md: 16px;
  --fv-gap-lg: 24px;
  --fv-gap-xl: 36px;
  --fv-header-h: 64px; /* adjust if your header is taller */
  --fv-footer-h: 44px; /* adjust if you have a sticky footer */
}

/* Base */
html { box-sizing: border-box; }
*,*::before,*::after { box-sizing: inherit; }
html, body { height: 100%; }
body{
  margin:0;
  font-family: var(--fv-font);
  color: var(--fv-text);
  background: var(--fv-bg);
  line-height: 1.4;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* App layout helpers (safe, additive) */
#app, .app-root { min-height: 100dvh; }

/* FarmVista shell layout */
.fv-shell{
  min-height: 100dvh;
  background: var(--fv-bg);
  display: grid;
  grid-template-columns: clamp(250px, 23vw, 320px) 1fr;
  grid-template-rows: auto 1fr auto;
  grid-template-areas:
    "sidebar header"
    "sidebar main"
    "sidebar footer";
}

@media (max-width: 900px){
  .fv-shell{
    grid-template-columns: 1fr;
    grid-template-areas:
      "header"
      "main"
      "footer";
  }
}

.fv-sidebar{
  grid-area: sidebar;
  background: #fff;
  border-right: 1px solid var(--fv-border);
  display: flex;
  flex-direction: column;
  width: clamp(250px, 72vw, 320px);
  max-width: 90vw;
  position: sticky;
  top: 0;
  height: 100dvh;
  transform: translateX(-110%);
  transition: transform .3s ease;
  z-index: 1000;
  box-shadow: none;
}

.drawer-open .fv-sidebar{ transform: translateX(0); }

@media (max-width: 900px){
  .fv-sidebar{
    position: fixed;
    left: 0;
    right: auto;
    box-shadow: var(--fv-shadow);
  }
}

@media (min-width: 901px){
  .fv-sidebar{ transform: none; }
}

body.drawer-open{ overflow: hidden; }

@media (min-width: 901px){
  body.drawer-open{ overflow: auto; }
}

.fv-sidebar .s-head{
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 20px;
  border-bottom: 1px solid var(--fv-border);
}

.fv-sidebar .s-head img{
  width: 42px;
  height: 42px;
  object-fit: contain;
}

.fv-sidebar .s-head .name{
  font-weight: 700;
  font-size: 1.1rem;
}

.fv-sidebar .drawer-scroll{
  flex: 1;
  overflow-y: auto;
  padding-bottom: 24px;
}

.fv-nav{
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px 0 16px;
}

.fv-group{ padding: 0 12px; }

.fv-group-home .fv-home-link{
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: var(--fv-text);
  padding: 12px 16px;
  border-radius: 12px;
  font-weight: 700;
  background: var(--fv-green-05);
}

.fv-group-home .fv-home-link span:last-child{ font-size: 1.2rem; }

.fv-group-home .fv-home-link:hover{ background: rgba(12,124,62,0.12); }

.fv-group-header{
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border: none;
  background: transparent;
  color: var(--fv-text);
  font-weight: 600;
  padding: 10px 16px;
  border-radius: 12px;
  cursor: pointer;
  font-size: 1rem;
  transition: background .2s ease;
}

.fv-group-header:hover,
.fv-group-header:focus-visible{
  background: var(--fv-green-05);
}

.fv-group-header:focus-visible{
  outline: 3px solid var(--fv-focus);
  outline-offset: 2px;
}

.fv-group .chevron{ transition: transform .2s ease; }

.fv-group.expanded .chevron{ transform: rotate(180deg); }

.fv-sublist{
  display: flex;
  flex-direction: column;
  overflow: hidden;
  max-height: 0;
  transition: max-height .3s ease;
  padding-left: 4px;
}

.fv-sublist a{
  display: block;
  text-decoration: none;
  color: var(--fv-muted);
  font-weight: 500;
  font-size: .95rem;
  padding: 8px 16px 8px 32px;
  border-radius: 10px;
  transition: background .2s ease, color .2s ease;
}

.fv-sublist a:hover,
.fv-sublist a:focus-visible{
  background: var(--fv-green-05);
  color: var(--fv-text);
}

.fv-nav a.active{
  background: var(--fv-green);
  color: #fff;
}

.fv-nav a.active:hover{ background: var(--fv-green); }

.fv-main{
  grid-area: main;
  width: 100%;
}

.fv-header{
  grid-area: header;
  background: #fff;
  border-bottom: 1px solid var(--fv-border);
  position: sticky;
  top: 0;
  z-index: 900;
}

.fv-header-inner{
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 0 var(--fv-gap-md);
  min-height: var(--fv-header-h);
}

.hamburger-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  border: none;
  background: transparent;
  cursor: pointer;
  color: var(--fv-text);
  transition: background .2s ease, transform .2s ease;
}

.hamburger-btn:hover{ background: var(--fv-green-05); }

.hamburger-btn:focus-visible{
  outline: 3px solid var(--fv-focus);
  outline-offset: 2px;
}

.fv-brand{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  user-select: none;
}

.fv-brand img{
  width: 38px;
  height: 38px;
  object-fit: contain;
}

.fv-brand .title{
  font-weight: 700;
  font-size: 1.2rem;
}

.fv-header-actions{
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 10px;
}

.icon-btn,
.btn-gear{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 38px;
  border-radius: 10px;
  border: 1px solid var(--fv-border);
  background: #fff;
  cursor: pointer;
  transition: box-shadow .2s ease, transform .2s ease, background .2s ease;
}

.icon-btn:hover,
.btn-gear:hover{
  box-shadow: var(--fv-shadow);
  transform: translateY(-1px);
}

.icon-btn:focus-visible,
.btn-gear:focus-visible{
  outline: 3px solid var(--fv-focus);
  outline-offset: 2px;
}

.header-breadcrumbs{
  border-top: 1px solid var(--fv-border);
  background: #fff;
}

.fv-footer{ grid-area: footer; }

.fv-footer .inner{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px var(--fv-gap-md);
  color: var(--fv-muted);
  font-size: .9rem;
}

.drawer-overlay{
  position: fixed;
  inset: 0;
  background: rgba(20,28,20,0.35);
  opacity: 0;
  pointer-events: none;
  transition: opacity .3s ease;
  z-index: 950;
}

.drawer-open .drawer-overlay{
  opacity: 1;
  pointer-events: auto;
}

@media (min-width: 901px){
  .drawer-overlay{ display: none; }
}

.container, .page, main{
  max-width: 1240px;
  margin-inline: auto;
  padding: clamp(12px, 2.5vw, 24px);
}

/* Cards */
.card{
  background: var(--fv-surface);
  border: 1px solid var(--fv-border);
  border-radius: var(--fv-radius);
  box-shadow: var(--fv-shadow);
  padding: var(--fv-gap-lg);
}
.card h1, .card h2, .card h3 { margin-top: 0.2em; }

/* Buttons */
.btn{
  display:inline-flex; align-items:center; gap:8px;
  border-radius: 10px; border:1px solid var(--fv-border);
  background: var(--fv-surface);
  padding: 10px 14px; font-weight:600; cursor:pointer;
  transition: transform .06s ease, box-shadow .06s ease, background .2s ease;
}
.btn:focus-visible { outline: 3px solid var(--fv-focus); outline-offset: 2px; }
.btn:hover{ transform: translateY(-1px); box-shadow: var(--fv-shadow); }
.btn.primary{ background: var(--fv-green); color: #fff; border-color: transparent; }
.btn.primary:hover{ filter: brightness(1.04); }

/* Forms (light polish) */
input, select, textarea{
  border:1px solid var(--fv-border);
  border-radius:10px;
  padding:10px 12px;
  background:#fff;
  width:100%;
}
input:focus, select:focus, textarea:focus{
  outline: 3px solid var(--fv-focus);
  border-color: transparent;
}

/* HEADER: keep your existing header; we only add polish */
header, #app-header{
  position: sticky; top: 0; z-index: 1000;
  background: #fff;
  border-bottom:1px solid var(--fv-border);
  min-height: var(--fv-header-h);
}

/* Breadcrumbs: force horizontal row, anchored to header bottom */
.breadcrumbs, .fv-breadcrumbs{
  display: flex; flex-wrap: nowrap; align-items: center;
  gap: 10px;
  height: 36px;
  padding: 0 var(--fv-gap-md);
  border-top: 1px solid var(--fv-border);
  background: #fff;
  overflow-x: auto;
  scrollbar-width: thin;
}
.breadcrumbs a, .fv-breadcrumbs a, .breadcrumbs span{
  white-space: nowrap;
  text-decoration: none;
  color: var(--fv-muted);
  font-weight: 600;
  font-size: 0.95rem;
}
.breadcrumbs .sep::after, .fv-breadcrumbs .sep::after{
  content: "›";
  color: var(--fv-muted);
  margin-inline: 2px;
}

/* If breadcrumbs live inside header container */
#app-header .breadcrumbs, #app-header .fv-breadcrumbs{
  border-top: 1px solid var(--fv-border);
}

/* SIDEBAR: robust scrolling even when menus exceed viewport */
nav#side-drawer, .side-drawer, .app-sidebar{
  width: clamp(250px, 24vw, 320px);
  background: #fff;
  border-right:1px solid var(--fv-border);
  box-shadow: 0 0 0 rgba(0,0,0,0); /* reset */
}
nav#side-drawer .drawer-scroll,
.side-drawer .drawer-scroll,
.app-sidebar .drawer-scroll{
  max-height: calc(100dvh - var(--fv-header-h) - var(--fv-footer-h, 0px));
  overflow-y: auto;
  overscroll-behavior: contain;
  padding-bottom: 24px;
}

/* Fallback: if there is no dedicated scroll wrapper, make sidebar scroll */
nav#side-drawer, .side-drawer, .app-sidebar{
  max-height: 100dvh;
  overflow-y: auto;
}

/* Menu items polish (safe) */
nav#side-drawer .menu, .side-drawer .menu{ padding: 8px; }
nav#side-drawer .menu .item,
.side-drawer .menu .item{
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border-radius:10px;
  color:var(--fv-text); text-decoration:none;
}
nav#side-drawer .menu .item:hover{ background: var(--fv-green-05); }

/* Content header rows */
.page-title{
  display:flex; align-items:center; justify-content:space-between;
  gap: 12px; margin: 6px 0 16px;
}
.page-title h1{ font-size: clamp(1.25rem, 2.2vw, 1.6rem); margin: 0; }

/* Tables */
.table{
  width:100%;
  border-collapse: separate; border-spacing:0;
  background:#fff; border:1px solid var(--fv-border);
  border-radius: 12px; overflow: hidden;
}
.table th{
  text-align:left; background: linear-gradient(0deg, #fff, #fff) padding-box,
                    linear-gradient(90deg, var(--fv-green), var(--fv-gold)) border-box;
  border-bottom: 2px solid var(--fv-border);
  padding:12px 14px; color:#0b4023; font-weight:800;
}
.table td{ padding: 12px 14px; border-bottom:1px solid var(--fv-border); }
.table tr:last-child td{ border-bottom: none; }

/* Utility chips */
.badge{ display:inline-block; padding:4px 10px; border-radius:999px; font-weight:700; font-size:.85rem; }
.badge.green{ background: var(--fv-green-05); color: var(--fv-green); }
.badge.gold{ background: rgba(212,160,23,0.08); color: var(--fv-gold); }

/* Footer */
footer, #app-footer{
  background:#fff; border-top:1px solid var(--fv-border);
  min-height: var(--fv-footer-h);
}

/* Tweak wide layouts on mobile */
@media (max-width: 980px){
  .container, .page, main{ padding: 14px; }
  nav#side-drawer{ width: 260px; }
  .page-title{ flex-direction: column; align-items: flex-start; gap: 6px; }
}

/* OPTIONAL: Hide any built-in header search/profile block; JS will inject a gear */
#app-header .header-search, #app-header .profile-box, .header-search, .profile-box{
  display: none !important;
}

/* Settings gear button look (inserted by JS) */
.fv-gear-btn{
  all: unset;
  display:inline-flex; align-items:center; justify-content:center;
  width: 38px; height: 38px; border-radius: 10px;
  border:1px solid var(--fv-border);
  background:#fff; cursor:pointer; font-size: 20px; line-height: 1;
}
.fv-gear-btn:hover{ box-shadow: var(--fv-shadow); transform: translateY(-1px); }
