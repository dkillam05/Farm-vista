/* =========================================
File: /assets/css/theme.css  (FULL REPLACEMENT)
Brand-first color system + preferences sheet
========================================= */

/* Reset & layout */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  line-height: 1.4;
  color: var(--text);
  background: var(--bg);
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
           env(safe-area-inset-bottom) env(safe-area-inset-left);
  overflow-x: hidden;
}

/* Brand palette (tune to your final tones) */
:root{
  --brand-green:#0f6b3a;
  --brand-green-700:#0a4c29;
  --brand-gold:#e2b100;

  /* Light */
  --bg:#f6f7f6;
  --surface:#ffffff;
  --text:#142016;
  --muted:#677a6e;
  --border:#e3e6e2;

  --header-bg:var(--brand-green);
  --header-fg:#ffffff;

  --footer-bg:#0b1a10;
  --footer-fg:#cfd7d1;

  --shadow:0 12px 24px rgba(0,0,0,.14);
}
html[data-theme="dark"]{
  --bg:#0d1210;
  --surface:#151b17;
  --text:#e8eee9;
  --muted:#9fb2a7;
  --border:#253228;

  --header-bg:#0a2617;
  --header-fg:#e8eee9;

  --footer-bg:#070b08;
  --footer-fg:#9fb2a7;

  --shadow:0 12px 24px rgba(0,0,0,.5);
}
@media (prefers-color-scheme: dark){
  html[data-theme="auto"]{
    --bg:#0d1210; --surface:#151b17; --text:#e8eee9; --muted:#9fb2a7; --border:#253228;
    --header-bg:#0a2617; --header-fg:#e8eee9; --footer-bg:#070b08; --footer-fg:#9fb2a7;
    --shadow:0 12px 24px rgba(0,0,0,.5);
  }
}

/* Header */
.app-header{
  position:sticky; top:0; left:0; right:0;
  display:grid; grid-template-columns:1fr auto; align-items:center;
  height:56px; padding:0 12px;
  background:var(--header-bg); color:var(--header-fg);
  z-index:1000;
}
.header-left{display:flex; align-items:center; gap:10px; min-width:0;}
.brand-mark{height:28px; width:auto; display:block;}
.brand-name{font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
.header-right{display:flex; align-items:center; gap:8px; justify-self:end;}
.icon-btn{background:transparent; border:0; width:40px; height:40px; display:grid; place-items:center; border-radius:10px; color:inherit;}
.icon-btn:focus-visible{outline:2px solid var(--brand-gold); outline-offset:2px;}

/* Preferences sheet */
.gear-panel{
  position:absolute; top:56px; right:8px;
  width:min(520px,92vw);
  max-height:calc(100vh - 56px - env(safe-area-inset-bottom));
  overflow:auto;
  background:var(--surface); color:var(--text);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:var(--shadow);
  transform-origin:top right; transform:scale(.98);
  opacity:0; visibility:hidden;
  transition:transform .16s ease, opacity .16s ease, visibility .16s;
}
.gear-panel[aria-hidden="false"]{transform:scale(1); opacity:1; visibility:visible;}
.gp-header{
  display:flex; align-items:center; gap:10px;
  padding:12px 14px; border-bottom:1px solid var(--border);
  background:color-mix(in srgb, var(--header-bg) 12%, var(--surface));
  position:sticky; top:0; z-index:1;
}
.gp-header img{width:22px; height:22px;}
.gp-header span{font-weight:700;}

.gp-subheader{
  display:flex; align-items:center; gap:8px;
  padding:10px 12px; border-bottom:1px solid var(--border);
  position:sticky; top:0; background:var(--surface); z-index:1;
}
.gp-subheader h3{margin:0; font-size:1rem;}
.gp-back{background:none; border:0; font-size:20px; line-height:1; cursor:pointer;}

.gp-item{
  display:flex; align-items:center; justify-content:space-between;
  width:100%; padding:14px; border:0; background:none; color:inherit;
  text-decoration:none; cursor:pointer; border-bottom:1px solid var(--border);
}
.gp-item:hover{background:rgba(15,107,58,0.06);}
.gp-icon{width:24px; display:inline-flex; margin-right:10px;}
.gp-text{flex:1; display:flex; align-items:center; gap:8px;}
.gp-caret{opacity:.5;}
.gp-logout{background:rgba(176,0,32,.06);}

/* Theme chips */
.theme-row{display:flex; gap:10px; flex-wrap:wrap; padding:12px;}
.theme-chip{
  display:flex; align-items:center; gap:8px;
  border:1px solid var(--border); background:var(--surface);
  border-radius:999px; padding:8px 12px; cursor:pointer;
}
.theme-chip svg{fill:currentColor;}
.theme-chip[aria-pressed="true"]{outline:2px solid var(--brand-gold);}

/* Tabs & forms */
.tabs{display:flex; gap:8px; padding:10px 12px; border-bottom:1px solid var(--border);}
.tab{border:1px solid var(--border); background:var(--surface); border-radius:999px; padding:6px 12px; cursor:pointer;}
.tab.active{outline:2px solid var(--brand-gold);}
.fb-form{padding:12px;}
.field{display:block; margin:10px 0;}
.field span{display:block; font-size:.9rem; color:var(--muted); margin-bottom:6px;}
.field input, .field textarea{
  width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:10px;
  color:var(--text); background:var(--surface);
}
.grid{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
.actions{display:flex; gap:8px; margin-top:10px;}
.btn{border:1px solid var(--border); background:var(--surface); padding:10px 14px; border-radius:10px; cursor:pointer;}
.btn-primary{background:var(--brand-green); border-color:var(--brand-green); color:#fff;}
.btn:focus-visible{outline:2px solid var(--brand-gold);}

.fb-list{list-style:none; padding:8px 0 0; margin:0;}
.fb-list li{border-top:1px solid var(--border); padding:8px 0;}
.muted{color:var(--muted);}

/* Dashboard mock */
.app-main{min-height:calc(100vh - 56px - 44px); display:block;}
.container{max-width:1100px; margin:0 auto; padding:16px;}
.cards{display:grid; grid-template-columns:1fr; gap:12px;}
.card{background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:14px; box-shadow:var(--shadow);}
.card h3{margin:0 0 8px;}
.row{display:flex; gap:16px; flex-wrap:wrap;}
.stat-label{font-size:.85rem; color:var(--muted);}
.stat-value{font-weight:700; font-size:1.2rem;}

/* Footer */
.app-footer{
  height:44px; display:grid; place-items:center; color:var(--footer-fg);
  background:var(--footer-bg);
}