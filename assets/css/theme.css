/* ==========================================================
   File: /assets/css/theme.css
   Brand-first color system + dual-mode (light/dark)
   ========================================================== */

/* ---------- Reset & layout ---------- */
* { box-sizing: border-box; }
html, body { height: 100%; }
html { background: var(--bg); }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  line-height: 1.4;
  color: var(--text);
  background: var(--bg);
  overflow-x: hidden;
  overscroll-behavior-x: none;
  -webkit-text-size-adjust: 100%;
}

/* ---------- Safe-area variables ---------- */
:root {
  --safe-top: env(safe-area-inset-top);
  --safe-right: env(safe-area-inset-right);
  --safe-bottom: env(safe-area-inset-bottom);
  --safe-left: env(safe-area-inset-left);

  /* ---------- Brand palette ---------- */
  --brand-green: #3B7E46;
  --brand-green-700: #0a4c29;
  --brand-gold: #D0C542;
  --brand-gunmetal: #CBCDCB;

  /* ---------- Light theme (as before) ---------- */
  --bg: #F6F7F6;
  --surface: #FFFFFF;
  --text: #142016;
  --muted: #677a6e;
  --border: #E3E6E2;

  --header-bg: var(--brand-green);
  --header-fg: #FFFFFF;

  --footer-bg: #0B1A10;
  --footer-fg: #CFD7D1;

  --shadow: 0 12px 24px rgba(0,0,0,.14);

  /* ---------- Component tokens (light defaults) ---------- */
  /* Cards / hero cards */
  --card-surface: var(--surface);
  --card-border:  var(--border);

  /* Sidebar (drawer) */
  --sidebar-surface: #ffffff;
  --sidebar-border:  #eeeeee;
  --sidebar-text:    #222222;
}

/* ---------- Dark theme (manual toggle) ---------- */
html.dark {
  --bg: #0d1210;
  --surface: #151b17;
  --text: #E8EEE9;
  --muted: #9FB2A7;
  --border: #253228;

  --header-bg: #0a2617;
  --header-fg: #E8EEE9;

  --footer-bg: #070b08;
  --footer-fg: #9FB2A7;

  --shadow: 0 12px 24px rgba(0,0,0,.5);

  /* Component tokens (dark overrides) */
  --card-surface: #1a1f1c;   /* slight lift over bg */
  --card-border:  #2a342c;

  --sidebar-surface: #171a18;
  --sidebar-border:  #2a2e2b;
  --sidebar-text:    #f1f3ef;
}

/* ---------- Auto-dark for system preference ---------- */
@media (prefers-color-scheme: dark) {
  html:not(.dark)[data-theme="auto"] {
    --bg: #0d1210;
    --surface: #151b17;
    --text: #E8EEE9;
    --muted: #9FB2A7;
    --border: #253228;

    --header-bg: #0a2617;
    --header-fg: #E8EEE9;

    --footer-bg: #070b08;
    --footer-fg: #9FB2A7;

    --shadow: 0 12px 24px rgba(0,0,0,.5);

    /* Component tokens (auto-dark overrides) */
    --card-surface: #1a1f1c;
    --card-border:  #2a342c;

    --sidebar-surface: #171a18;
    --sidebar-border:  #2a2e2b;
    --sidebar-text:    #f1f3ef;
  }
}

/* ---------- Global shell ---------- */
.app-shell, #app {
  min-height: 100vh;
  min-height: 100svh;
  display: flex;
  flex-direction: column;
}

/* ---------- Header ---------- */
.app-header {
  position: sticky; top: 0; left: 0; right: 0;
  display: grid; grid-template-columns: 1fr auto;
  align-items: center;
  height: 56px;
  padding: 0 max(12px,var(--safe-right)) 0 max(12px,var(--safe-left));
  background: var(--header-bg);
  color: var(--header-fg);
  z-index: 1000;
  width: 100%;
}
.header-left{display:flex;align-items:center;gap:10px;}
.brand-name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.header-right{display:flex;align-items:center;gap:8px;justify-self:end;}
.icon-btn{
  background:transparent;border:0;width:40px;height:40px;
  display:grid;place-items:center;border-radius:10px;color:inherit;
}
.icon-btn:focus-visible{outline:2px solid var(--brand-gold);outline-offset:2px;}

/* ---------- Card & content helpers ---------- */
.container{max-width:1100px;margin:0 auto;padding:16px;}
.card{
  background:var(--card-surface);
  border:1px solid var(--card-border);
  border-radius:12px;
  padding:14px;
  box-shadow:var(--shadow);
}
.card h3{margin:0 0 8px;}
.cards{display:grid;gap:12px;}
.row{display:flex;gap:16px;flex-wrap:wrap;}
.stat-label{font-size:.85rem;color:var(--muted);}
.stat-value{font-weight:700;font-size:1.2rem;}

/* ---------- Tables ---------- */
.table{width:100%;border-collapse:collapse;table-layout:fixed;}
.table th,.table td{padding:14px;border-bottom:1px solid var(--border);text-align:left;}
.table td{word-break:break-word;}

/* ---------- Footer ---------- */
.app-footer{
  margin-top:auto;
  display:grid;
  place-items:center;
  color:var(--footer-fg);
  background:var(--footer-bg);
  border-top:3px solid var(--brand-gold);
  padding:10px max(16px,var(--safe-right))
           calc(10px + var(--safe-bottom))
           max(16px,var(--safe-left));
  text-align:center;
  white-space:nowrap; /* keep date + tagline in one line */
}