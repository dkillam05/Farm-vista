<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>FarmVista • Expense Reports</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#3B7E46" />

  <!-- App includes (consistent across the site) -->
  <link rel="manifest" href="/Farm-vista/manifest.webmanifest" />
  <link rel="apple-touch-icon" href="/Farm-vista/assets/icons/apple-touch-icon.png" />
  <link rel="icon" href="/Farm-vista/assets/icons/icon-192.png" />
  <script src="/Farm-vista/js/theme-boot.js"></script>
  <link rel="stylesheet" href="/Farm-vista/assets/css/theme.css" />
  <link rel="stylesheet" href="/Farm-vista/assets/css/app.css" />
  <script defer src="/Farm-vista/js/fv-combo.js"></script>

  <style>
    /* ---------- TILE PAGE LAYOUT (on-screen) ---------- */
    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: clamp(14px, 3vw, 22px);
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + var(--ftr-h, 42px) + 96px) !important;
    }

    .page-title {
      margin: 0 0 4px 0;
    }

    .page-sub {
      margin: 0 0 16px 0;
      color: var(--muted, #67706B);
      font-size: 0.95rem;
    }

    .filter-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 16px;
    }

    .year-filter {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.95rem;
      color: var(--muted, #67706B);
    }

    .year-filter label {
      font-weight: 500;
    }

    .year-filter select {
      min-width: 120px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle, #D3D7D4);
      background: var(--surface, #FFFFFF);
      font: inherit;
    }

    .section {
      border: 1px solid var(--border);
      border-radius: 14px;
      background: var(--surface);
      box-shadow: var(--shadow, 0 8px 20px rgba(0, 0, 0, .08));
      overflow: hidden;
    }

    .section-head {
      display: grid;
      grid-template-columns: 36px 1fr;
      gap: 12px;
      align-items: center;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(90deg, rgba(47, 108, 60, .12), transparent);
    }

    .section-head .icon {
      width: 24px;
      height: 24px;
      color: #2F6C3C;
      display: grid;
      place-items: center;
    }

    .section-head-title {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .section-head-title strong {
      font-size: 0.98rem;
    }

    .section-head-title span {
      font-size: 0.82rem;
      color: var(--muted, #67706B);
    }

    .section-body {
      padding: 16px;
    }

    .month-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    @media (min-width: 700px) {
      .month-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (min-width: 960px) {
      .month-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    .month-card {
      border: 1px solid var(--border-subtle, #D3D7D4);
      border-radius: 14px;
      background: var(--surface-elevated, #FFFFFF);
      padding: 12px 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: var(--shadow-soft, 0 6px 16px rgba(0, 0, 0, .04));
      cursor: pointer;
      transition:
        transform 0.12s ease,
        box-shadow 0.12s ease,
        border-color 0.12s ease,
        background 0.12s ease;
    }

    .month-card:hover {
      transform: translateY(-1px);
      border-color: rgba(47, 108, 60, 0.4);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.10);
      background: linear-gradient(135deg, rgba(47, 108, 60, 0.04), rgba(255, 255, 255, 0.96));
    }

    .month-avatar {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(47, 108, 60, 0.35);
      background: radial-gradient(circle at 30% 0%, rgba(255, 255, 255, 0.9), rgba(47, 108, 60, 0.12));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: #2F6C3C;
      flex-shrink: 0;
    }

    .month-text-main {
      font-size: 0.98rem;
      font-weight: 600;
    }

    .month-text-sub {
      font-size: 0.8rem;
      color: var(--muted, #67706B);
    }

    .month-card-inner {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    /* ---------- REPORT TEMPLATE (your PDF look) ---------- */

    :root{
      --fv-green: #3B7E46;
      --fv-gold:  #D0C542;
      --fv-border: #D1D5DB;
      --fv-text: #111827;
      --fv-muted: #6B7280;
      --fv-bg: #F3F4F6;
      --page-max: 900px;
    }

    .report-root {
      display: none; /* only used in print */
    }

    .report-shell{
      width:100%;
      display:flex;
      justify-content:center;
      padding:24px 12px;
      background:var(--fv-bg);
      box-sizing:border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color:var(--fv-text);
    }

    .report-page{
      width:100%;
      max-width:var(--page-max);
      background:#fff;
      border-radius:12px;
      box-shadow:0 10px 30px rgba(15,23,42,0.15);
      padding:24px 28px 28px;
      box-sizing:border-box;
    }

    /* Header */
    .report-header{
      display:grid;
      grid-template-columns: auto 1fr auto;
      gap:16px;
      align-items:center;
      border-bottom:2px solid var(--fv-green);
      padding-bottom:14px;
      margin-bottom:18px;
    }

    .report-logo{
      width:64px;
      height:64px;
      border-radius:16px;
      border:1px solid var(--fv-border);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:26px;
      font-weight:800;
      color:#fff;
      background:radial-gradient(circle at 30% 0%, #4CAF50, var(--fv-green));
    }
    .report-logo span{
      letter-spacing:0.02em;
    }

    .company-block{
      min-width:0;
    }
    .company-name{
      font-size:18px;
      font-weight:800;
      margin:0 0 2px;
    }
    .company-line{
      font-size:12px;
      color:var(--fv-muted);
      margin:0;
      white-space:pre-line;
    }

    .report-meta-top{
      text-align:right;
      font-size:11px;
      color:var(--fv-muted);
    }
    .report-meta-top strong{
      color:var(--fv-text);
    }

    /* Title + summary */
    .report-title-block{
      margin-bottom:16px;
    }

    .report-title{
      font-size:20px;
      font-weight:800;
      margin:4px 0 4px;
      letter-spacing:0.02em;
      text-transform:uppercase;
    }

    .report-subtitle{
      font-size:13px;
      color:var(--fv-muted);
      margin:0;
    }

    .report-summary-strip{
      margin-top:12px;
      padding:8px 10px;
      border-radius:10px;
      background:linear-gradient(90deg, rgba(59,126,70,0.08), transparent);
      border:1px solid rgba(59,126,70,0.20);
      font-size:11px;
      display:flex;
      flex-wrap:wrap;
      gap:6px 16px;
    }
    .summary-pill{
      display:inline-flex;
      align-items:center;
      gap:4px;
      white-space:nowrap;
    }
    .summary-label{
      text-transform:uppercase;
      letter-spacing:0.08em;
      font-weight:600;
      font-size:10px;
      color:var(--fv-muted);
    }
    .summary-value{
      font-weight:600;
      font-size:11px;
    }

    /* Sections */
    .report-section{
      margin-top:18px;
    }
    .section-title{
      font-size:13px;
      text-transform:uppercase;
      letter-spacing:0.12em;
      color:var(--fv-muted);
      margin:0 0 4px;
    }
    .section-heading-row{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      margin-bottom:6px;
    }
    .section-title-main{
      font-size:15px;
      font-weight:700;
      letter-spacing:0.03em;
      text-transform:uppercase;
    }
    .section-note{
      font-size:11px;
      color:var(--fv-muted);
    }

    .section-body{
      font-size:12px;
      line-height:1.5;
    }

    /* Tables */
    .table-wrap{
      margin-top:6px;
      border-radius:10px;
      border:1px solid var(--fv-border);
      overflow:hidden;
    }

    .report-table{
      width:100%;
      border-collapse:collapse;
      font-size:11px;
    }

    .report-table thead{
      background:#F9FAFB;
    }

    .report-table th,
    .report-table td{
      padding:6px 8px;
      border-bottom:1px solid #E5E7EB;
      text-align:left;
      vertical-align:top;
    }

    .report-table th{
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:0.08em;
      font-size:10px;
      color:#4B5563;
      border-bottom:1px solid #D1D5DB;
    }

    .report-table tr:nth-child(even) td{
      background:#F9FAFB;
    }

    .cell-right{ text-align:right; }
    .cell-center{ text-align:center; }
    .cell-muted{ color:var(--fv-muted); }

    /* Key metrics row */
    .kpi-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:6px;
    }

    .kpi-card{
      flex:1 1 140px;
      border-radius:10px;
      border:1px solid var(--fv-border);
      padding:8px 10px;
      background:linear-gradient(135deg, rgba(59,126,70,0.06), #ffffff);
    }
    .kpi-label{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:0.08em;
      color:var(--fv-muted);
      margin-bottom:2px;
    }
    .kpi-value{
      font-size:16px;
      font-weight:800;
    }
    .kpi-footnote{
      font-size:10px;
      color:var(--fv-muted);
      margin-top:2px;
    }

    /* Footer */
    .report-footer{
      margin-top:18px;
      padding-top:8px;
      border-top:1px solid var(--fv-border);
      display:flex;
      justify-content:space-between;
      gap:10px;
      font-size:10px;
      color:var(--fv-muted);
    }
    .footer-left{
      max-width:60%;
    }
    .footer-right{
      text-align:right;
    }

    /* Print: hide tiles, show report template */
    @media print{
      html, body{
        background:#fff;
        padding:0;
      }
      .page.container{
        display:none !important;
      }
      .report-root{
        display:block !important;
      }
      .report-shell{
        padding:0;
      }
      .report-page{
        max-width:none;
        border-radius:0;
        box-shadow:none;
        padding:12mm 14mm;
      }
    }
  </style>

  <script>
    // Ensure fv-shell is loaded
    (function () {
      if (!customElements.get('fv-shell')) {
        const s = document.createElement('script');
        s.src = '/Farm-vista/js/fv-shell.js';
        s.defer = true;
        document.head.appendChild(s);
      }
    })();

    function setText(id, value){
      const el = document.getElementById(id);
      if (el) el.textContent = value || '';
    }

    // Build base FV_REPORT_DATA for a given year + month
    function buildBaseReportData(year, monthNumber){
      // monthNumber: 1-12
      const monthIndex = monthNumber - 1;
      const monthNames = [
        'January','February','March','April','May','June',
        'July','August','September','October','November','December'
      ];

      let monthLabel = 'This Period';
      let dateRange = '';

      if (year && monthIndex >= 0 && monthIndex < 12){
        const mName = monthNames[monthIndex];
        monthLabel = mName + ' ' + year;

        const start = new Date(year, monthIndex, 1);
        const end = new Date(year, monthIndex + 1, 0);

        function fmt(d){
          const shortNames = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
          return shortNames[d.getMonth()] + ' ' + d.getDate() + ', ' + d.getFullYear();
        }

        dateRange = fmt(start) + ' – ' + fmt(end);
      }

      const now = new Date();
      const runDateLocal = now.toISOString().slice(0,10);

      window.FV_REPORT_DATA = window.FV_REPORT_DATA || {};

      // Company defaults (you can override later)
      window.FV_REPORT_DATA.company = Object.assign({
        name: 'Dowson Farms',
        street: '',
        city: 'Divernon',
        state: 'IL',
        zip: '',
        phone: '',
        email: ''
      }, window.FV_REPORT_DATA.company || {});

      // Meta defaults (using your template fields)
      window.FV_REPORT_DATA.meta = Object.assign({
        reportTitleShort: 'Monthly Expenses',
        reportTitle: 'Monthly Expense Report',
        reportSubtitle: 'Summary of farm expenditures for ' + monthLabel,
        runDateTime: now.toLocaleString('en-US', {
          year: 'numeric', month: 'short', day: '2-digit',
          hour: '2-digit', minute: '2-digit'
        }),
        preparedBy: '',
        dateRange: dateRange || monthLabel,
        filterSummary: 'All farms · All categories',
        recordCount: 0,
        footerLeftText: 'Internal management report. For farm records only.',
        footerRightText: 'Monthly Expenses',
        runDate: runDateLocal
      }, window.FV_REPORT_DATA.meta || {});

      // KPIs (blank defaults)
      window.FV_REPORT_DATA.kpis = Object.assign({
        note: 'All figures in USD.',
        kpi1Value: '$0.00',
        kpi1Label: 'Total spend recorded for this month',
        kpi2Value: '$0.00',
        kpi2Label: 'Average daily spend',
        kpi3Value: 'None',
        kpi3Label: 'Top category by spend'
      }, window.FV_REPORT_DATA.kpis || {});

      // Detail rows for table
      if (!Array.isArray(window.FV_REPORT_DATA.detailRows)){
        window.FV_REPORT_DATA.detailRows = [];
      }

      // Section 2 text
      window.FV_REPORT_DATA.section2 = Object.assign({
        note: '',
        bodyText: ''
      }, window.FV_REPORT_DATA.section2 || {});

      // If no detail rows, set some friendly "no data" text
      if (!window.FV_REPORT_DATA.detailRows.length){
        window.FV_REPORT_DATA.meta.recordCount = 0;
        window.FV_REPORT_DATA.section2.note =
          'No additional group breakdowns are available.';
        window.FV_REPORT_DATA.section2.bodyText =
          'No expenditures were recorded for this period, so there are no grouped totals to display.';
      } else {
        window.FV_REPORT_DATA.meta.recordCount = window.FV_REPORT_DATA.detailRows.length;
      }

      // Remember the label for intro text
      window.FV_REPORT_DATA.meta.monthLabel = monthLabel;
    }

    function renderReportFromData(){
      const data   = window.FV_REPORT_DATA || {};
      const company = data.company || {};
      const meta    = data.meta || {};
      const kpis    = data.kpis || {};
      const detail  = Array.isArray(data.detailRows) ? data.detailRows : [];
      const section2 = data.section2 || {};

      // Company line
      const lineParts = [
        company.street,
        (company.city && company.state) ? (company.city + ', ' + company.state) : (company.city || company.state),
        company.zip
      ].filter(Boolean);

      const contactParts = [];
      if (company.phone) contactParts.push('Phone: ' + company.phone);
      if (company.email) contactParts.push('Email: ' + company.email);
      if (contactParts.length){
        lineParts.push(contactParts.join(' · '));
      }

      setText('companyName', company.name || '');
      setText('companyLine', lineParts.join('\n'));

      // Meta
      setText('REPORT_TITLE_SHORT', meta.reportTitleShort || 'Monthly Expenses');
      setText('RUN_DATETIME',       meta.runDateTime || '');
      setText('PREPARED_BY',        meta.preparedBy || '');
      setText('REPORT_TITLE',       meta.reportTitle || 'Monthly Expense Report');
      setText('REPORT_SUBTITLE',    meta.reportSubtitle || '');
      setText('DATE_RANGE',         meta.dateRange || '');
      setText('FILTER_SUMMARY',     meta.filterSummary || 'No additional filters');
      setText('RECORD_COUNT',       String(meta.recordCount || 0));

      // KPIs
      setText('KPI_NOTE',      kpis.note || 'All figures in USD.');
      setText('KPI_1_VALUE',   kpis.kpi1Value || '$0.00');
      setText('KPI_1_LABEL',   kpis.kpi1Label || 'Total spend recorded for this month');
      setText('KPI_2_VALUE',   kpis.kpi2Value || '$0.00');
      setText('KPI_2_LABEL',   kpis.kpi2Label || 'Average daily spend');
      setText('KPI_3_VALUE',   kpis.kpi3Value || 'None');
      setText('KPI_3_LABEL',   kpis.kpi3Label || 'Top category by spend');

      // Detail intro text
      const intro = detail.length
        ? ('Detailed list of recorded expenditures for ' + (meta.monthLabel || 'this period') + '.')
        : ('No expenditures were recorded for ' + (meta.monthLabel || 'this period') + '.');
      setText('DETAIL_INTRO_TEXT', intro);

      // Section 2
      setText('SECTION2_NOTE',      section2.note || '');
      setText('SECTION2_BODY_TEXT', section2.bodyText || '');

      // Footer
      setText('FOOTER_LEFT_TEXT',  meta.footerLeftText || '');
      setText('FOOTER_RIGHT_TEXT', meta.footerRightText || 'Monthly Expenses');
      setText('RUN_DATE',          meta.runDate || '');

      // Build detail table
      const tbody = document.getElementById('DETAIL_TABLE_BODY');
      if (tbody){
        tbody.innerHTML = '';
        if (!detail.length){
          const tr = document.createElement('tr');
          const td = document.createElement('td');
          td.colSpan = 4;
          td.className = 'cell-center cell-muted';
          td.textContent = 'No expenditures recorded for this period.';
          tr.appendChild(td);
          tbody.appendChild(tr);
        } else {
          detail.forEach(row => {
            const tr = document.createElement('tr');

            const tdA = document.createElement('td');
            tdA.textContent = row.columnA || '';
            tr.appendChild(tdA);

            const tdB = document.createElement('td');
            tdB.textContent = row.columnB || '';
            tr.appendChild(tdB);

            const tdVal = document.createElement('td');
            tdVal.className = 'cell-right';
            tdVal.textContent = row.value || '';
            tr.appendChild(tdVal);

            const tdNotes = document.createElement('td');
            tdNotes.textContent = row.notes || '';
            tr.appendChild(tdNotes);

            tbody.appendChild(tr);
          });
        }
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const yearSelect = document.getElementById('reportYear');
      const grid = document.querySelector('[data-month-grid]');

      function populateYears(){
        if (!yearSelect) return;
        const now = new Date();
        const currentYear = now.getFullYear();
        const years = [currentYear, currentYear - 1, currentYear - 2];

        years.forEach((year, idx) => {
          const opt = document.createElement('option');
          opt.value = String(year);
          opt.textContent = String(year);
          if (idx === 0) opt.selected = true;
          yearSelect.appendChild(opt);
        });
      }

      function handleMonthClick(evt){
        const card = evt.target.closest('[data-month]');
        if (!card) return;

        const yearStr = yearSelect ? yearSelect.value : '';
        const monthStr = card.getAttribute('data-month');
        if (!yearStr || !monthStr) return;

        const yearNum  = parseInt(yearStr, 10);
        const monthNum = parseInt(monthStr, 10); // 1–12

        // 1) Build base report data for this month
        buildBaseReportData(yearNum, monthNum);

        // 2) (Later) you can pull real data from Firestore here and fill:
        //    FV_REPORT_DATA.detailRows, FV_REPORT_DATA.kpis, etc.

        // 3) Render template from FV_REPORT_DATA
        renderReportFromData();

        // 4) Open the print dialog
        setTimeout(() => {
          window.focus();
          window.print();
        }, 300);
      }

      populateYears();
      if (grid){
        grid.addEventListener('click', handleMonthClick);
      }
    });
  </script>
</head>
<body>
  <fv-shell>
    <!-- ---------- ON-SCREEN TILE UI ---------- -->
    <div class="page container">
      <h1 class="page-title">Expense Reports</h1>
      <p class="page-sub">
        Tap a month to print the detailed expenditures report for that period. Use the year filter to jump between years.
      </p>

      <div class="filter-row">
        <div></div>
        <div class="year-filter">
          <label for="reportYear">Year</label>
          <select id="reportYear" name="reportYear" data-fv-combo="true"></select>
        </div>
      </div>

      <section class="section" aria-label="Monthly expense reports">
        <header class="section-head">
          <div class="icon" aria-hidden="true">
            <!-- simple report icon (MIT/Tabler style) -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M9 3h6l4 4v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2z" />
              <path d="M14 3v4a2 2 0 0 0 2 2h4" />
              <path d="M9 13h6" />
              <path d="M9 17h3" />
            </svg>
          </div>
          <div class="section-head-title">
            <strong>Monthly Expense Reports</strong>
            <span>One report per month for the selected year.</span>
          </div>
        </header>

        <div class="section-body">
          <div class="month-grid" data-month-grid>
            <!-- Jan -->
            <article class="month-card" data-month="01">
              <div class="month-avatar">JAN</div>
              <div class="month-card-inner">
                <div class="month-text-main">January</div>
                <div class="month-text-sub">Tap to print January expenses.</div>
              </div>
            </article>

            <!-- Feb -->
            <article class="month-card" data-month="02">
              <div class="month-avatar">FEB</div>
              <div class="month-card-inner">
                <div class="month-text-main">February</div>
                <div class="month-text-sub">Tap to print February expenses.</div>
              </div>
            </article>

            <!-- Mar -->
            <article class="month-card" data-month="03">
              <div class="month-avatar">MAR</div>
              <div class="month-card-inner">
                <div class="month-text-main">March</div>
                <div class="month-text-sub">Tap to print March expenses.</div>
              </div>
            </article>

            <!-- Apr -->
            <article class="month-card" data-month="04">
              <div class="month-avatar">APR</div>
              <div class="month-card-inner">
                <div class="month-text-main">April</div>
                <div class="month-text-sub">Tap to print April expenses.</div>
              </div>
            </article>

            <!-- May -->
            <article class="month-card" data-month="05">
              <div class="month-avatar">MAY</div>
              <div class="month-card-inner">
                <div class="month-text-main">May</div>
                <div class="month-text-sub">Tap to print May expenses.</div>
              </div>
            </article>

            <!-- Jun -->
            <article class="month-card" data-month="06">
              <div class="month-avatar">JUN</div>
              <div class="month-card-inner">
                <div class="month-text-main">June</div>
                <div class="month-text-sub">Tap to print June expenses.</div>
              </div>
            </article>

            <!-- Jul -->
            <article class="month-card" data-month="07">
              <div class="month-avatar">JUL</div>
              <div class="month-card-inner">
                <div class="month-text-main">July</div>
                <div class="month-text-sub">Tap to print July expenses.</div>
              </div>
            </article>

            <!-- Aug -->
            <article class="month-card" data-month="08">
              <div class="month-avatar">AUG</div>
              <div class="month-card-inner">
                <div class="month-text-main">August</div>
                <div class="month-text-sub">Tap to print August expenses.</div>
              </div>
            </article>

            <!-- Sep -->
            <article class="month-card" data-month="09">
              <div class="month-avatar">SEP</div>
              <div class="month-card-inner">
                <div class="month-text-main">September</div>
                <div class="month-text-sub">Tap to print September expenses.</div>
              </div>
            </article>

            <!-- Oct -->
            <article class="month-card" data-month="10">
              <div class="month-avatar">OCT</div>
              <div class="month-card-inner">
                <div class="month-text-main">October</div>
                <div class="month-text-sub">Tap to print October expenses.</div>
              </div>
            </article>

            <!-- Nov -->
            <article class="month-card" data-month="11">
              <div class="month-avatar">NOV</div>
              <div class="month-card-inner">
                <div class="month-text-main">November</div>
                <div class="month-text-sub">Tap to print November expenses.</div>
              </div>
            </article>

            <!-- Dec -->
            <article class="month-card" data-month="12">
              <div class="month-avatar">DEC</div>
              <div class="month-card-inner">
                <div class="month-text-main">December</div>
                <div class="month-text-sub">Tap to print December expenses.</div>
              </div>
            </article>
          </div>
        </div>
      </section>
    </div>

    <!-- ---------- HIDDEN REPORT TEMPLATE (PRINT-ONLY) ---------- -->
    <div class="report-root" aria-hidden="true">
      <div class="report-shell">
        <div class="report-page">
          <!-- HEADER -->
          <header class="report-header">
            <!-- Logo / initials -->
            <div class="report-logo">
              <span>DF</span>
            </div>

            <!-- Company info -->
            <div class="company-block">
              <p class="company-name" id="COMPANY_NAME"></p>
              <p class="company-line" id="COMPANY_LINE"></p>
            </div>

            <!-- Meta (top-right) -->
            <div class="report-meta-top">
              <div><strong id="REPORT_TITLE_SHORT"></strong></div>
              <div>Generated: <span id="RUN_DATETIME"></span></div>
              <div>Prepared by: <span id="PREPARED_BY"></span></div>
            </div>
          </header>

          <!-- TITLE + SUMMARY -->
          <section class="report-title-block">
            <h1 class="report-title" id="REPORT_TITLE"></h1>
            <p class="report-subtitle" id="REPORT_SUBTITLE"></p>

            <div class="report-summary-strip">
              <div class="summary-pill">
                <span class="summary-label">Date range</span>
                <span class="summary-value" id="DATE_RANGE"></span>
              </div>
              <div class="summary-pill">
                <span class="summary-label">Filters</span>
                <span class="summary-value" id="FILTER_SUMMARY"></span>
              </div>
              <div class="summary-pill">
                <span class="summary-label">Records</span>
                <span class="summary-value" id="RECORD_COUNT"></span>
              </div>
            </div>
          </section>

          <!-- KEY METRICS -->
          <section class="report-section">
            <div class="section-heading-row">
              <div class="section-title-main">Key Metrics</div>
              <div class="section-note" id="KPI_NOTE"></div>
            </div>
            <div class="kpi-row">
              <div class="kpi-card">
                <div class="kpi-label">Primary Metric</div>
                <div class="kpi-value" id="KPI_1_VALUE"></div>
                <div class="kpi-footnote" id="KPI_1_LABEL"></div>
              </div>
              <div class="kpi-card">
                <div class="kpi-label">Secondary Metric</div>
                <div class="kpi-value" id="KPI_2_VALUE"></div>
                <div class="kpi-footnote" id="KPI_2_LABEL"></div>
              </div>
              <div class="kpi-card">
                <div class="kpi-label">Tertiary Metric</div>
                <div class="kpi-value" id="KPI_3_VALUE"></div>
                <div class="kpi-footnote" id="KPI_3_LABEL"></div>
              </div>
            </div>
          </section>

          <!-- MAIN TABLE SECTION -->
          <section class="report-section">
            <h2 class="section-title">Detail</h2>
            <div class="section-body">
              <p id="DETAIL_INTRO_TEXT"></p>

              <div class="table-wrap">
                <table class="report-table">
                  <thead>
                    <tr>
                      <th>Column A</th>
                      <th>Column B</th>
                      <th class="cell-right">Value</th>
                      <th>Notes</th>
                    </tr>
                  </thead>
                  <tbody id="DETAIL_TABLE_BODY">
                    <!-- Populated by JS -->
                  </tbody>
                </table>
              </div>
            </div>
          </section>

          <!-- OPTIONAL SECOND SECTION -->
          <section class="report-section">
            <div class="section-heading-row">
              <div class="section-title-main">Section Header</div>
              <div class="section-note" id="SECTION2_NOTE"></div>
            </div>
            <div class="section-body">
              <p id="SECTION2_BODY_TEXT"></p>
            </div>
          </section>

          <!-- FOOTER -->
          <footer class="report-footer">
            <div class="footer-left" id="FOOTER_LEFT_TEXT"></div>
            <div class="footer-right">
              FarmVista • <span id="FOOTER_RIGHT_TEXT"></span> • <span id="RUN_DATE"></span>
            </div>
          </footer>
        </div>
      </div>
    </div>
  </fv-shell>
</body>
</html>
