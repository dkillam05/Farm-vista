<!doctype html><html lang="en"><head>
  <meta charset="utf-8"/>
  <title>FarmVista • Setup → Products → Grain Bags</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="theme-color" content="#3B7E46"/>

  <link rel="manifest" href="/Farm-vista/manifest.webmanifest"/>
  <link rel="apple-touch-icon" href="/Farm-vista/assets/icons/apple-touch-icon.png"/>
  <link rel="icon" href="/Farm-vista/assets/icons/icon-192.png"/>
  <script src="/Farm-vista/js/theme-boot.js"></script>
  <link rel="stylesheet" href="/Farm-vista/assets/css/theme.css"/>
  <link rel="stylesheet" href="/Farm-vista/assets/css/app.css"/>

  <style>
    .section{border:1px solid var(--border); border-radius:14px; background:var(--surface); box-shadow:var(--shadow,0 8px 20px rgba(0,0,0,.08));}
    .section-head{display:grid; grid-template-columns:36px 1fr; gap:12px; align-items:center; padding:14px 16px; border-bottom:1px solid var(--border); background:linear-gradient(90deg, rgba(47,108,60,.12), transparent);}
    .section-head .icon{width:24px; height:24px; color:#2F6C3C; display:grid; place-items:center;}
    .section-body{padding:16px; display:grid; gap:14px;}
    .grid-2{display:grid; gap:10px; grid-template-columns:1fr 1fr;}
    .grid-3{display:grid; gap:10px; grid-template-columns:1fr 1fr 1fr;}
    @media(max-width:880px){ .grid-2, .grid-3 { grid-template-columns:1fr; } }
    .field label{display:block; font-weight:800; margin:0 0 6px 0;}
    .input,.select,.textarea{width:100%; font:inherit; font-size:16px; color:var(--text); background:var(--card-surface,var(--surface)); border:1px solid var(--border); border-radius:10px; padding:12px; outline:none;}
    .textarea{min-height:96px; resize:vertical;}
    .help{font-size:13px; color:var(--muted,#67706B);}
    .actions{display:flex; gap:12px; flex-wrap:wrap}
    .btn{display:inline-flex; align-items:center; justify-content:center; min-width:148px; padding:12px 16px; border-radius:12px; border:1px solid var(--border); background:var(--card-surface,var(--surface)); font-weight:800; color:var(--text); cursor:pointer;}
    .btn-primary{border-color:transparent; background:#2F6C3C; color:#fff;}
    .toast{position:fixed; left:50%; bottom:calc(env(safe-area-inset-bottom,0px) + 72px); transform:translateX(-50%); background:#2F6C3C; color:#fff; padding:10px 14px; border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,.25); z-index:99999; display:none;}
    .toast.show{display:block; animation:fadeout 2.8s forwards;}
    @keyframes fadeout{0%{opacity:1} 85%{opacity:1} 100%{opacity:0}}
    .page{max-width:1100px; margin:0 auto; padding:clamp(14px,3vw,22px); padding-bottom:calc(env(safe-area-inset-bottom,0px) + var(--ftr-h,42px) + 96px)!important;}
    .page-title{margin:0 0 8px 0;}
    .page-sub{margin:0 0 14px 0; color:var(--muted,#67706B);}
  </style>

  <script>(function(){ if(!customElements.get('fv-shell')){ const s=document.createElement('script'); s.src='/Farm-vista/js/fv-shell.js'; s.defer=true; document.head.appendChild(s);} })();</script>
</head><body>
  <fv-shell>
    <div class="page container">
      <h1 class="page-title">Grain Bag Setup</h1>
      <p class="page-sub">Add grain bag SKUs for inventory. Track brand, size, and estimated bushels per bag.</p>

      <section class="section">
        <header class="section-head">
          <div class="icon" aria-hidden="true">
            <!-- bag icon -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 7h12l-1 12a3 3 0 0 1 -3 3h-4a3 3 0 0 1 -3 -3z"/><path d="M9 7v-1a3 3 0 0 1 6 0v1"/>
            </svg>
          </div>
          <div>
            <strong>New Grain Bag</strong>
            <div class="help">Enter dimensions and estimated capacity; add optional specs.</div>
          </div>
        </header>

        <div class="section-body">
          <div class="grid-3">
            <div class="field">
              <label for="brand">Brand</label>
              <input id="brand" class="input" placeholder="e.g., Up North, IPesaSilo, GrainPro">
            </div>
            <div class="field">
              <label for="length">Length (ft)</label>
              <input id="length" class="input" inputmode="decimal" placeholder="e.g., 200">
            </div>
            <div class="field">
              <label for="diameter">Diameter (ft)</label>
              <input id="diameter" class="input" inputmode="decimal" placeholder="e.g., 10">
            </div>
          </div>

          <div class="grid-2">
            <div class="field">
              <label for="bushels">Estimated Bushels / Bag</label>
              <input id="bushels" class="input" inputmode="decimal" placeholder="e.g., 12000">
            </div>
            <div class="field">
              <label for="thickness">Wall Thickness (mil, optional)</label>
              <input id="thickness" class="input" inputmode="decimal" placeholder="e.g., 8">
            </div>
          </div>

          <div class="field">
            <label for="notes">Notes</label>
            <textarea id="notes" class="textarea" placeholder="Color, UV rating, zipper/valve style, etc."></textarea>
          </div>

          <div class="actions">
            <button id="clear" class="btn" type="button">Clear</button>
            <button id="save" class="btn btn-primary" type="button">Save Grain Bag</button>
          </div>
        </div>
      </section>
    </div>
  </fv-shell>

  <div id="toast" class="toast" role="status" aria-live="polite">Saved.</div>

  <script>
  (function(){
    "use strict";
    const $=id=>document.getElementById(id);
    const STORAGE_KEY="fv_grainbag_products_v1";
    const toast=$("toast");
    function showToast(m="Saved."){ toast.textContent=m; toast.classList.remove("show"); void toast.offsetWidth; toast.classList.add("show"); }
    function loadAll(){ try{ const a=JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]"); return Array.isArray(a)?a:[]; }catch(e){ return []; } }
    function saveAll(a){ localStorage.setItem(STORAGE_KEY, JSON.stringify(a)); }
    function validate(){
      if(!$("brand").value.trim()) return "Enter a brand.";
      if(!$("length").value.trim()) return "Enter a length (ft).";
      if(!$("diameter").value.trim()) return "Enter a diameter (ft).";
      if(!$("bushels").value.trim()) return "Enter estimated bushels per bag.";
      return "";
    }
    $("save").addEventListener("click", ()=>{
      const err=validate(); if(err){ alert(err); return; }
      const item={
        t: Date.now(),
        brand: $("brand").value.trim(),
        length: $("length").value.trim(),
        diameter: $("diameter").value.trim(),
        bushels: $("bushels").value.trim(),
        thickness: $("thickness").value.trim(),
        notes: $("notes").value.trim()
      };
      const arr=loadAll(); arr.unshift(item); saveAll(arr); showToast("Grain bag saved.");
    });
    $("clear").addEventListener("click", ()=>{
      ["brand","length","diameter","bushels","thickness","notes"].forEach(id=>{
        const el=$(id); if(el.tagName==="SELECT") el.selectedIndex=0; else el.value="";
      });
    });
  })();
  </script>
</body></html>